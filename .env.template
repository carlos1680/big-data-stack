# ==========================
# BIGDATA STACK ‚Äî .env.template
# Copi√° este archivo como ".env" y reemplaz√° los CHANGEME_*.
# ‚ö†Ô∏è No subas ".env" al repo.
# ==========================

# ==========================
# CONFIGURACI√ìN DE RED
# ==========================
NETWORK_NAME=bigdata_net
SUBNET=172.28.0.0/16

# ==========================
# CONFIGURACI√ìN DE MARIADB
# ==========================
MARIADB_VERSION=11.4
MARIADB_ROOT_PASSWORD=CHANGEME_MARIADB_ROOT_PASSWORD
MARIADB_DATABASE=bigdata_db
MARIADB_USER=bigdata_user
MARIADB_PASSWORD=CHANGEME_MARIADB_PASSWORD
MARIADB_IP=172.28.0.10
MARIADB_PORT=3306

# ==========================
# CONFIGURACI√ìN DE MINIO
# ==========================
MINIO_VERSION=latest
MINIO_ROOT_USER=CHANGEME_MINIO_ROOT_USER
MINIO_ROOT_PASSWORD=CHANGEME_MINIO_ROOT_PASSWORD
MINIO_BUCKET=data
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_IP=172.28.0.11

# ==========================
# CONFIGURACI√ìN DE ADMINER
# ==========================
ADMINER_IP=172.28.0.12

# ==========================
# CONFIGURACI√ìN DE SPARK
# ==========================
SPARK_VERSION=3.5.0
SPARK_MASTER_IP=172.28.0.20
SPARK_WORKER1_IP=172.28.0.21
SPARK_WORKER2_IP=172.28.0.22
SPARK_HISTORY_IP=172.28.0.23

# Puertos Spark
SPARK_MASTER_PORT=7077
SPARK_MASTER_WEBUI_PORT=8080
SPARK_WORKER1_WEBUI_PORT=8081
SPARK_WORKER2_WEBUI_PORT=8082
SPARK_HISTORY_PORT=18080

# Recursos Spark
SPARK_DRIVER_MEMORY=2g
SPARK_EXECUTOR_MEMORY=2g

# ==========================
# JDBC DRIVERS (base)
# ==========================
MARIADB_JDBC_VERSION=3.3.3
MARIADB_JDBC_URL=https://repo1.maven.org/maven2/org/mariadb/jdbc/mariadb-java-client/3.3.3/mariadb-java-client-3.3.3.jar
MYSQL_JDBC_URL=https://repo1.maven.org/maven2/com/mysql/mysql-connector-j/8.4.0/mysql-connector-j-8.4.0.jar

# ==========================
# CONFIGURACI√ìN DE SUPERSET
# ==========================
SUPERSET_VERSION=3.0.2
SUPERSET_PORT=8088
SUPERSET_SECRET_KEY=CHANGEME_SUPERSET_SECRET_KEY
SUPERSET_ADMIN_USER=admin
SUPERSET_ADMIN_PASSWORD=CHANGEME_SUPERSET_ADMIN_PASSWORD
SUPERSET_ADMIN_EMAIL=admin@example.com
SUPERSET_IP=172.28.0.30

# Base de datos de Superset (MariaDB)
SUPERSET_DB_HOST=mariadb
SUPERSET_DB_PORT=3306
SUPERSET_DB_USER=${MARIADB_USER}
SUPERSET_DB_PASS=${MARIADB_PASSWORD}
SUPERSET_DB_NAME=superset_db
SUPERSET_DATABASE_URI=mysql+pymysql://${MARIADB_USER}:${MARIADB_PASSWORD}@mariadb:${MARIADB_PORT}/superset_db

# ==========================
# CONFIGURACI√ìN DE JUPYTERLAB
# ==========================
JUPYTER_VERSION=3.5.0
JUPYTER_PORT=8888
JUPYTER_IP=172.28.0.40
JUPYTER_TOKEN=CHANGEME_JUPYTER_TOKEN

# Configuraci√≥n Spark desde Jupyter
JUPYTER_SPARK_MASTER=spark://spark-master:7077
JUPYTER_DRIVER_MEMORY=2g
JUPYTER_EXECUTOR_MEMORY=2g

# ==========================
# CONFIGURACI√ìN DE AIRFLOW
# ==========================
AIRFLOW_VERSION=2.10.0
AIRFLOW_WEB_IP=172.28.0.62
AIRFLOW_SCHEDULER_IP=172.28.0.63
AIRFLOW_WORKER_IP=172.28.0.64
AIRFLOW_INIT_IP=172.28.0.61
REDIS_IP=172.28.0.60

# Puerto Airflow
AIRFLOW_PORT=8090
AIRFLOW__WEBSERVER__WEB_SERVER_PORT=8090

# Conexi√≥n a MariaDB
AIRFLOW_DB_CONN=mysql+mysqldb://${MARIADB_USER}:${MARIADB_PASSWORD}@mariadb:${MARIADB_PORT}/airflow_db

# Admin de Airflow (usado por entrypoint)
AIRFLOW_ADMIN_USER=admin
AIRFLOW_ADMIN_PASS=CHANGEME_AIRFLOW_ADMIN_PASS
AIRFLOW_ADMIN_EMAIL=admin@example.com
AIRFLOW_ADMIN_FIRSTNAME=Carlos
AIRFLOW_ADMIN_LASTNAME=Piriz

# ==========================
# CONFIGURACI√ìN DE REDIS / CELERY
# ==========================
REDIS_VERSION=7
REDIS_PORT=6379

AIRFLOW__CORE__EXECUTOR=CeleryExecutor
AIRFLOW__CELERY__BROKER_URL=redis://redis:6379/0
AIRFLOW__CELERY__RESULT_BACKEND=db+mysql://${MARIADB_USER}:${MARIADB_PASSWORD}@mariadb:${MARIADB_PORT}/airflow_db

# ==========================
# CONFIGURACI√ìN DE FLOWER
# ==========================
AIRFLOW_FLOWER_IP=172.28.0.70

# ==========================
# AIRFLOW KEYS (secrets)
# ==========================
AIRFLOW__CORE__FERNET_KEY=CHANGEME_AIRFLOW_FERNET_KEY
AIRFLOW__WEBSERVER__SECRET_KEY=CHANGEME_AIRFLOW_WEBSERVER_SECRET_KEY

# ==========================
# CONFIGURACI√ìN DE N8N
# ==========================
N8N_VERSION=1.122.5
N8N_IP=172.28.0.80
N8N_PORT=5678
N8N_LISTEN_ADDRESS=0.0.0.0

# Si NO us√°s ngrok, dej√° http + localhost.
# Si us√°s ngrok, pon√© https + tu dominio y ajust√° WEBHOOK_URL/N8N_WEBHOOK_URL/N8N_EDITOR_BASE_URL.
N8N_PROTOCOL=http
N8N_HOST=localhost
N8N_WEBHOOK_URL=http://localhost:5678
WEBHOOK_URL=http://localhost:5678
WEBHOOK_TUNNEL_URL=http://localhost:5678
N8N_EDITOR_BASE_URL=http://localhost:5678

# (Opcional, recomendado por logs)
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true
N8N_RUNNERS_ENABLED=true

# Autenticaci√≥n b√°sica
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=CHANGEME_N8N_BASIC_AUTH_PASSWORD
N8N_BASIC_AUTH_EXCLUDE_ENDPOINTS=/rest/health,/healthz

# Carpeta de datos (ruta interna dentro del contenedor)
N8N_DATA_PATH=/home/node/.n8n

# Recomendadas por avisos deprecations
DB_SQLITE_POOL_SIZE=5
N8N_GIT_NODE_DISABLE_BARE_REPOS=true
# Solo si necesit√°s leer envs desde Code Node/expresiones:
N8N_BLOCK_ENV_ACCESS_IN_NODE=false

# üîê n8n encryption key (debe quedar fija)
N8N_ENCRYPTION_KEY=CHANGEME_N8N_ENCRYPTION_KEY

# ==========================
# OAuth / credenciales (NO las subas nunca)
# ==========================
# GOOGLE_OAUTH_CLIENT_ID=CHANGEME_GOOGLE_OAUTH_CLIENT_ID
# GOOGLE_OAUTH_CLIENT_SECRET=CHANGEME_GOOGLE_OAUTH_CLIENT_SECRET
# GOOGLE_OAUTH_CALLBACK_URL=CHANGEME_GOOGLE_OAUTH_CALLBACK_URL

# ==========================
# AIRFLOW / PYTHON PACKAGES (LIB)
# ==========================
AIRFLOW_VERSION_LIB=2.10.0
PYSPARK_VERSION_LIB=3.5.0

# ==========================
# JDBC DRIVERS (LIB)
# ==========================
MARIADB_JDBC_VERSION_LIB=3.3.3
MYSQL_JDBC_VERSION_LIB=8.4.0

MARIADB_JDBC_URL_LIB=https://repo1.maven.org/maven2/org/mariadb/jdbc/mariadb-java-client/3.3.3/mariadb-java-client-3.3.3.jar
MYSQL_JDBC_URL_LIB=https://repo1.maven.org/maven2/com/mysql/mysql-connector-j/8.4.0/mysql-connector-j-8.4.0.jar